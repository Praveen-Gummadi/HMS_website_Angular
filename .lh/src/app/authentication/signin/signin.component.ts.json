{
    "sourceFile": "src/app/authentication/signin/signin.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1738230148751,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1738237380696,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,13 @@\n import { Component } from '@angular/core';\r\n import { SharedModule } from '../../shared/shared.module';\r\n import { LoginService } from '../login.service';\r\n-import { Router } from '@angular/router';\r\n+import { Router, RouterLink } from '@angular/router';\r\n \r\n @Component({\r\n   selector: 'app-signin',\r\n   standalone: true,\r\n-  imports: [SharedModule],\r\n+  imports: [SharedModule, RouterLink],\r\n   templateUrl: './signin.component.html',\r\n   styleUrl: './signin.component.scss'\r\n })\r\n export class SigninComponent {\r\n"
                }
            ],
            "date": 1738230148751,
            "name": "Commit-0",
            "content": "import { Component } from '@angular/core';\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { LoginService } from '../login.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-signin',\r\n  standalone: true,\r\n  imports: [SharedModule],\r\n  templateUrl: './signin.component.html',\r\n  styleUrl: './signin.component.scss'\r\n})\r\nexport class SigninComponent {\r\n  mobile: string = '+91 709502497';\r\n  isWhatsAppChecked: boolean = false;\r\n  isFormValid: boolean = false;\r\n\r\n  constructor(\r\n    private loginService: LoginService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  allowOnlyNumbers(event: KeyboardEvent): void {\r\n    const charCode = event.key.charCodeAt(0);\r\n    if (charCode < 48 || charCode > 57) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  validateForm(): void {\r\n    this.isFormValid = this.mobile.trim().length >= 10\r\n  }\r\n\r\n  onSearchKeyup(event: KeyboardEvent) {\r\n    if (event.key === 'Enter') {\r\n      this.onContinue();\r\n    }\r\n  }\r\n\r\n  onContinue(): void {\r\n    const mobileNumber = this.mobile.replace(/\\D/g, '').slice(-10);\r\n    if (this.isFormValid) {\r\n      this.loginService.generateOtp(mobileNumber).subscribe({\r\n        next: (response: any) => {\r\n          localStorage.setItem('mobile-otp', mobileNumber);\r\n          if (response.isSuccess) {\r\n            this.router.navigate(['/otp']);\r\n          } else if (response.statusCode === 403) {\r\n            alert(response.result);\r\n            // this.router.navigate(['/signup'], { queryParams: { key: mobileNumber } });\r\n            this.router.navigate(['/signup']);\r\n          } else {\r\n            console.error('Unexpected error:', response.errorMessages.join(', '));\r\n            alert('Unexpected error: ' + response.errorMessages.join(', '));\r\n          }\r\n        },\r\n      });\r\n    }\r\n    else {\r\n      alert('Please enter a valid mobile number and accept WhatsApp terms.');\r\n    }\r\n  }\r\n\r\n}\r\n"
        }
    ]
}