{
    "sourceFile": "src/app/authentication/auth.service.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1738238286122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1738241008961,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,6 +37,7 @@\n   logout(): void {\r\n     this.signedIn = false;\r\n     // localStorage.removeItem('authToken');\r\n     localStorage.clear();\r\n+    localStorage.setItem('userAddress', \"Use my current location\")\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1738307119412,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n \r\n     return false;\r\n   }\r\n \r\n-  getUsername(): string {\r\n+  getUserdata(): string {\r\n     this.username = localStorage.getItem('username')?? '';\r\n     return this.username;\r\n   }\r\n \r\n"
                },
                {
                    "date": 1738307131614,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n \r\n     return false;\r\n   }\r\n \r\n-  getUserdata(): string {\r\n+  getUsername(): string {\r\n     this.username = localStorage.getItem('username')?? '';\r\n     return this.username;\r\n   }\r\n \r\n"
                },
                {
                    "date": 1738308814005,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,8 +33,17 @@\n     this.username = localStorage.getItem('username')?? '';\r\n     return this.username;\r\n   }\r\n \r\n+  getUserdata(): { username: string, mobile: string, email: string, address: string } {\r\n+    const username = localStorage.getItem('username') ?? '';\r\n+    const mobile = localStorage.getItem('mobile') ?? '';\r\n+    const email = localStorage.getItem('email') ?? '';\r\n+    const address = localStorage.getItem('address') ?? '';\r\n+\r\n+    return { username, mobile, email, address };\r\n+  }\r\n+\r\n   logout(): void {\r\n     this.signedIn = false;\r\n     // localStorage.removeItem('authToken');\r\n     localStorage.clear();\r\n"
                }
            ],
            "date": 1738238286122,
            "name": "Commit-0",
            "content": "import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n\r\n  private signedIn = false;\r\n  private username = '';\r\n\r\n  isSignedIn(): boolean {\r\n\r\n    // Check if the token exists in localStorage\r\n    const token = localStorage.getItem('authToken');\r\n\r\n    // Optionally, validate the token (e.g., check its expiry)\r\n    if (token) {\r\n      const payload = JSON.parse(atob(token.split('.')[1])); // Decode the payload of the JWT\r\n      const isTokenExpired = payload.exp * 1000 < Date.now(); // Compare expiry time with current time\r\n\r\n      if (!isTokenExpired) {\r\n        this.signedIn = true;\r\n        return this.signedIn;\r\n      } else {\r\n        localStorage.removeItem('authToken');\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  getUsername(): string {\r\n    this.username = localStorage.getItem('username')?? '';\r\n    return this.username;\r\n  }\r\n\r\n  logout(): void {\r\n    this.signedIn = false;\r\n    // localStorage.removeItem('authToken');\r\n    localStorage.clear();\r\n  }\r\n}\r\n"
        }
    ]
}